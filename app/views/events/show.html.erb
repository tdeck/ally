<h1><%= @event[:name] %> (<%= @event[:id] %>)</h1>

Meetup link: <a href="<%= @event[:link] %>"><%= @event[:link] %></a>

<h2>Cross-posts</h2>
<ul>
  <% @cross_posts.each do |post| %>
    <li><a href="<%= post.post_link %>"><%= post.post_link %></a></li>
  <% end %>
</ul>

<h2>RSVPs (<%= @rsvps.count %>)</h2>
<table>
  <thead>
    <tr>
      <td>Username</td>
      <td>Supplied name</td>
      <td>Real name</td>
    </tr>
  </thead>
    <tbody>
    <% @rsvps.each do |rsvp| %>
      <tr>
        <td>
          <%= rsvp[:name] %>
        </td>
        <td>
          <%= form_tag(named_users_path, {id: "form_u#{rsvp[:uid]}"}) do %>
            <%= hidden_field_tag :return_to_event, @event[:id] %>
            <%= hidden_field_tag :meetup_id, rsvp[:uid] %>
            <% if rsvp[:verified_name].present? %>
              <%= rsvp[:answer] %>
            <% else %>
              <%= text_field_tag :full_name, rsvp[:answer] %>
            <% end %>
          <% end %>
        </td>
        <td>
          <% if rsvp[:verified_name] %>
            <%= rsvp[:verified_name] %>
          <% else %>
            <%= submit_tag 'âŸ¶ Store as real name', form: "form_u#{rsvp[:uid]}" %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<h2>Copyable RSVPs</h2>
<small>Click on the list below to select all</small>
<div class="select-all">
  <%# TODO sort this by verified name; right now it's sorted by the regular name %>
  <% @rsvps.each do |rsvp| %>
    <% if rsvp[:verified_name] %>
      <%= rsvp[:verified_name] %>
    <% else %>
      <%= rsvp[:name] %>*
    <% end %>
    <br>
  <% end %>

  <br>
  * These attendees did not provide a full name, and we weren't able to reach them before this list was compiled.
</div>
